variables:
  HUB: hub.spesolution.com
  IMAGE_TAG: $HUB/$CI_PROJECT_PATH:$CI_COMMIT_REF_NAME
  GIT_SUBMODULE_STRATEGY: recursive
  DOCKER_FILE: "." 

include:
  - local: .auth.before-script.yml 

docker_build:
  image: docker:stable
  stage: build
  script:
    - docker build -t $IMAGE_TAG $DOCKER_FILE
    - docker push $IMAGE_TAG