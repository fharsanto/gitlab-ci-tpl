variables:
  CI_HUB: hub.spesolution.com
  CI_IMAGE_TAG: $CI_HUB/$CI_PROJECT_PATH:$CI_COMMIT_REF_NAME
  GIT_SUBMODULE_STRATEGY: recursive
  CI_DOCKER_FILE: "." 

include:
  - local: .auth.before-script.yml 

docker_build:
  image: docker:stable
  stage: build
  script:
    - docker build -t $CI_IMAGE_TAG $CI_DOCKER_FILE
    - docker push $CI_IMAGE_TAG